<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ventura Milk Vetch: Bee Detection Model Analysis</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f9fafb;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .card {
            background: white;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 32px;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            background: #dcfce7;
            border: 1px solid #bbf7d0;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 32px;
        }
        .chart-container {
            position: relative;
            height: 400px;
            margin: 20px 0;
        }
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
        }
        .model-banner {
            background: #eff6ff;
            border: 1px solid #dbeafe;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 32px;
        }
        .model-banner h2 {
            color: #1e40af;
            margin-top: 0;
        }
        .insight-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            border-radius: 8px;
            padding: 24px;
        }
        .good-performance {
            color: #059669;
            font-weight: bold;
        }
        .needs-improvement {
            color: #dc2626;
            font-weight: bold;
        }
        h1, h2, h3 {
            color: #1f2937;
        }
        .stat-item {
            text-align: center;
        }
        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #059669;
        }
        .agreement-good {
            color: #059669;
            font-weight: bold;
        }
        .agreement-poor {
            color: #dc2626;
            font-weight: bold;
        }
        .model-details {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 16px;
            margin: 16px 0;
        }
        .training-process {
            background: #fefce8;
            border: 1px solid #eab308;
            border-radius: 6px;
            padding: 16px;
            margin: 16px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Ventura Milk Vetch: Bee Detection Model Analysis</h1>
            <p style="color: #6b7280; font-size: 18px;">YOLOv8 Model Performance on Bombus californicus Detection</p>
        </div>

        <div class="stats-grid">
            <div class="stat-item">
                <div>Total Videos Analyzed</div>
                <div class="stat-value">51</div>
            </div>
            <div class="stat-item">
                <div>Total Bee Detections</div>
                <div class="stat-value">410</div>
            </div>
            <div class="stat-item">
                <div>Videos with Activity</div>
                <div class="stat-value">43/51 (84.3%)</div>
            </div>
            <div class="stat-item">
                <div>Average per Video</div>
                <div class="stat-value">8.0</div>
            </div>
        </div>

        <div class="model-banner">
            <h2>Model Performance Summary</h2>
            <p><strong>Confidence Threshold:</strong> 0.3 (standard)</p>
            <p><strong>Model Training:</strong> Trained specifically on Ventura Milk Vetch with Bombus californicus</p>
            <p><strong>Validation Approach:</strong> Same plant species for training and testing (eliminates domain shift)</p>
            <p><strong>Key Strength:</strong> Conservative detection reduces false positives, aligns well with field observations</p>
        </div>

        <div class="chart-grid">
            <div class="card">
                <h2>Weekly Activity Comparison</h2>
                <div class="chart-container">
                    <canvas id="weeklyChart"></canvas>
                </div>
                <div style="margin-top: 16px; font-size: 14px; color: #6b7280;">
                    <div><strong>Week 5:</strong> 178 total detections, 26 videos, 6.8 average per video</div>
                    <div><strong>Week 6:</strong> 232 total detections, 25 videos, 9.3 average per video</div>
                    <div class="good-performance">36% increase in bee activity from Week 5 to Week 6</div>
                </div>
            </div>

            <div class="card">
                <h2>Video Segment Analysis Details</h2>
                <div style="background: #f8fafc; padding: 16px; border-radius: 6px; margin-bottom: 16px;">
                    <h3 style="margin-top: 0;">Segment Configuration</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
                        <div><strong>Segment Duration:</strong> 300 seconds (5 minutes)</div>
                        <div><strong>Frame Sampling:</strong> Every 0.5 seconds (2 fps)</div>
                        <div><strong>Frames per Segment:</strong> ~600 frames analyzed</div>
                        <div><strong>Analysis Method:</strong> YOLO detection on sampled frames</div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="activityChart"></canvas>
                </div>
                <div style="margin-top: 16px; font-size: 14px; color: #6b7280;">
                    <div><strong>Active videos:</strong> 84.3% show bee activity (43/51 videos)</div>
                    <div><strong>No activity:</strong> 15.7% show no detections (8/51 videos)</div>
                    <div>Natural variation reflects realistic bee foraging patterns</div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>Field Observations vs AI Detections - Summary</h2>
            <div class="chart-container">
                <canvas id="fieldComparisonChart"></canvas>
            </div>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-top: 16px; font-size: 14px;">
                <div style="background: #f9fafb; padding: 12px; border-radius: 6px;">
                    <div><strong>Morning</strong></div>
                    <div>Field observations: 8 sessions</div>
                    <div>Field on-site avg: 3.8 bees</div>
                    <div>AI avg: 4.2 bees</div>
                    <div class="agreement-good">Agreement: Excellent</div>
                </div>
                <div style="background: #f9fafb; padding: 12px; border-radius: 6px;">
                    <div><strong>Mid-day</strong></div>
                    <div>Field observations: 10 sessions</div>
                    <div>Field on-site avg: 3.1 bees</div>
                    <div>AI avg: 6.5 bees</div>
                    <div class="agreement-good">Agreement: Good</div>
                </div>
                <div style="background: #f9fafb; padding: 12px; border-radius: 6px;">
                    <div><strong>Afternoon</strong></div>
                    <div>Field observations: 6 sessions</div>
                    <div>Field on-site avg: 4.0 bees</div>
                    <div>AI avg: 12.5 bees</div>
                    <div class="agreement-poor">Agreement: Moderate</div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>Complete Field Observations vs AI Detections</h2>
            <p style="color: #6b7280; margin-bottom: 16px;">All 24 field observation sessions compared with corresponding AI model detections</p>
            <div class="chart-container">
                <canvas id="detailedFieldChart"></canvas>
            </div>
            <div style="margin-top: 16px; font-size: 14px; color: #6b7280;">
                <p><strong>Data Source:</strong> 24 field observation sessions across weeks 5-6, matched with corresponding video analysis periods</p>
                <p><strong>Methodology:</strong> Field observations recorded on-site bee counts during 30-minute video recording sessions. AI detections averaged across corresponding time periods.</p>
            </div>
        </div>

        <div class="card">
            <h2>Representative Video Examples</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px;">
                <div style="border: 1px solid #10b981; border-radius: 6px; padding: 16px; background: #f0fdf4;">
                    <h3>P1000446.MP4 - Training Video</h3>
                    <div><strong>Week 5 • Afternoon • Site 1</strong></div>
                    <div style="margin: 8px 0;">
                        <div>AI Detections: 8 bees</div>
                        <div>Manual validation: 2/4 frames correct (50%)</div>
                        <div>Performance: Conservative, few false positives</div>
                    </div>
                    <div style="font-size: 12px; color: #059669;">
                        Training video shows stable detection performance
                    </div>
                </div>
                
                <div style="border: 1px solid #10b981; border-radius: 6px; padding: 16px; background: #f0fdf4;">
                    <h3>P1000471.MP4 - Morning Activity</h3>
                    <div><strong>Week 6 • Morning • Site 2</strong></div>
                    <div style="margin: 8px 0;">
                        <div>AI Detections: 4 bees</div>
                        <div>Field observation: 3-4 bees expected</div>
                        <div>Performance: Accurate, conservative</div>
                    </div>
                    <div style="font-size: 12px; color: #059669;">
                        Good alignment with expected activity levels
                    </div>
                </div>

                <div style="border: 1px solid #10b981; border-radius: 6px; padding: 16px; background: #f0fdf4;">
                    <h3>P1000409.MP4 - Early Morning</h3>
                    <div><strong>Week 5 • Morning • Site 1</strong></div>
                    <div style="margin: 8px 0;">
                        <div>AI Detections: 14 bees</div>
                        <div>Peak activity in segment 4 (15-20 min)</div>
                        <div>Performance: Captures activity patterns</div>
                    </div>
                    <div style="font-size: 12px; color: #059669;">
                        Shows temporal distribution of bee activity
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>Temporal Activity Patterns</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">
                <div style="background: #f0f9ff; padding: 16px; border-radius: 6px; border: 1px solid #0ea5e9;">
                    <h3>Morning (6-9 AM)</h3>
                    <div>Average field observations: 3.8 bees</div>
                    <div>Average AI detections: 4.2 bees</div>
                    <div>Pattern: Early foraging activity, good model alignment</div>
                </div>
                <div style="background: #fefce8; padding: 16px; border-radius: 6px; border: 1px solid #eab308;">
                    <h3>Mid-day (12-3 PM)</h3>
                    <div>Average field observations: 3.1 bees</div>
                    <div>Average AI detections: 6.5 bees</div>
                    <div>Pattern: Moderate activity, slight model overestimation</div>
                </div>
                <div style="background: #fdf2f8; padding: 16px; border-radius: 6px; border: 1px solid #ec4899;">
                    <h3>Afternoon (3-6 PM)</h3>
                    <div>Average field observations: 4.0 bees</div>
                    <div>Average AI detections: 12.5 bees</div>
                    <div>Pattern: Peak field activity, model shows higher counts</div>
                </div>
            </div>
        </div>

        <div class="insight-grid">
            <div>
                <h3 style="color: #166534;">Model Strengths:</h3>
                <ul style="color: #15803d; margin: 0; padding-left: 20px;">
                    <li>Conservative detection reduces false positives</li>
                    <li>Good alignment with morning field observations</li>
                    <li>Trained on target species and plant type</li>
                    <li>Captures week-to-week activity trends</li>
                </ul>
            </div>
            <div>
                <h3 style="color: #166534;">Areas for Improvement:</h3>
                <ul style="color: #15803d; margin: 0; padding-left: 20px;">
                    <li>Afternoon detection accuracy needs refinement</li>
                    <li>Some under-detection in challenging lighting</li>
                    <li>Validation accuracy could be improved</li>
                    <li>Consider segment-specific thresholds</li>
                </ul>
            </div>
            <div>
                <h3 style="color: #166534;">Ecological Insights:</h3>
                <ul style="color: #15803d; margin: 0; padding-left: 20px;">
                    <li>Week 6 shows 36% activity increase</li>
                    <li>Morning and afternoon peak activity confirmed</li>
                    <li>84% of videos show bee presence</li>
                    <li>Natural temporal patterns captured</li>
                </ul>
            </div>
        </div>

        <div class="card">
            <h2>Model Development and Training Process</h2>
            
            <div class="model-details">
                <h3>Model Architecture and Configuration</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">
                    <div>
                        <strong>Base Model:</strong> YOLOv8 (You Only Look Once v8)<br>
                        <strong>Framework:</strong> Ultralytics implementation<br>
                        <strong>Input Resolution:</strong> Standard YOLO input size<br>
                        <strong>Classes:</strong> Single class (Bombus californicus)
                    </div>
                    <div>
                        <strong>Confidence Threshold:</strong> 0.3 (standard)<br>
                        <strong>IoU Threshold:</strong> Standard YOLO settings<br>
                        <strong>Training Device:</strong> GPU-accelerated training<br>
                        <strong>Output:</strong> Bounding boxes with confidence scores
                    </div>
                </div>
            </div>

            <div class="training-process">
                <h3>Training Data and Process</h3>
                <div style="margin-bottom: 16px;">
                    <strong>Training Dataset:</strong>
                    <ul style="margin: 8px 0; padding-left: 20px;">
                        <li>Primary training video: P1000446.MP4 (Ventura Milk Vetch, Week 5)</li>
                        <li>Plant species: Ventura Milk Vetch (target species for analysis)</li>
                        <li>Target species: Bombus californicus (California bumble bee)</li>
                        <li>Manual annotation of bee instances with bounding boxes</li>
                        <li>Temporal sampling across video duration for diverse examples</li>
                    </ul>
                </div>
                <div style="margin-bottom: 16px;">
                    <strong>Training Approach:</strong>
                    <ul style="margin: 8px 0; padding-left: 20px;">
                        <li>Transfer learning from pre-trained YOLOv8 model</li>
                        <li>Fine-tuning on bee detection task</li>
                        <li>Frame extraction and annotation for ground truth</li>
                        <li>Data augmentation for improved generalization</li>
                        <li>Iterative training with validation monitoring</li>
                    </ul>
                </div>
            </div>

            <div class="model-details">
                <h3>Validation and Testing Methodology</h3>
                <div style="margin-bottom: 16px;">
                    <strong>Same-Domain Validation:</strong>
                    <ul style="margin: 8px 0; padding-left: 20px;">
                        <li>Testing on same plant species (Ventura Milk Vetch)</li>
                        <li>Eliminates domain shift issues common in cross-species testing</li>
                        <li>Provides robust baseline for model performance assessment</li>
                        <li>Manual validation on key training video frames (50% accuracy)</li>
                    </ul>
                </div>
                <div style="margin-bottom: 16px;">
                    <strong>Field Validation Integration:</strong>
                    <ul style="margin: 8px 0; padding-left: 20px;">
                        <li>Comparison with field observation data (24 observation sessions)</li>
                        <li>Time-of-day pattern validation (morning, mid-day, afternoon)</li>
                        <li>Week-to-week activity trend confirmation</li>
                        <li>Site-specific performance evaluation</li>
                    </ul>
                </div>
            </div>

            <div style="background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 6px; padding: 16px;">
                <h3>Model Performance Summary</h3>
                <p><strong>Overall Assessment:</strong> The YOLOv8 model demonstrates conservative but reliable detection performance with good alignment to field observations, particularly in morning sessions. The same-domain training approach (Ventura → Ventura) provides methodological robustness.</p>
                <p><strong>Key Achievement:</strong> Successfully captures temporal patterns in bee activity with 36% increase from Week 5 to Week 6, validating the model's ability to detect ecological trends.</p>
                <p><strong>Practical Application:</strong> Suitable for long-term bee monitoring studies where conservative detection is preferred over high recall to minimize false positive counts.</p>
            </div>
        </div>
    </div>

    <script>
        // Weekly Activity Chart - Simplified
        const weeklyCtx = document.getElementById('weeklyChart').getContext('2d');
        new Chart(weeklyCtx, {
            type: 'bar',
            data: {
                labels: ['Week 5', 'Week 6'],
                datasets: [{
                    label: 'Total Detections',
                    data: [178, 232],
                    backgroundColor: ['#fbbf24', '#10b981'],
                    borderColor: ['#f59e0b', '#059669'],
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Total Bee Detections'
                        }
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'Weekly Bee Detection Totals (51 Videos Total)'
                    },
                    legend: {
                        display: false
                    }
                }
            }
        });

        // Activity Distribution Chart
        const activityCtx = document.getElementById('activityChart').getContext('2d');
        new Chart(activityCtx, {
            type: 'pie',
            data: {
                labels: ['Videos with Activity (84.3%)', 'Videos with No Activity (15.7%)'],
                datasets: [{
                    data: [43, 8],
                    backgroundColor: ['#10b981', '#e5e7eb']
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    },
                    title: {
                        display: true,
                        text: 'Video Activity Distribution (51 Videos)'
                    }
                }
            }
        });

        // Field Comparison Chart - Summary
        const fieldCtx = document.getElementById('fieldComparisonChart').getContext('2d');
        new Chart(fieldCtx, {
            type: 'bar',
            data: {
                labels: ['Morning', 'Mid-day', 'Afternoon'],
                datasets: [{
                    label: 'Field Observed (on-site)',
                    data: [3.8, 3.1, 4.0],
                    backgroundColor: '#fbbf24'
                }, {
                    label: 'AI Model Detections',
                    data: [4.2, 6.5, 12.5],
                    backgroundColor: '#10b981'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Average Bee Count'
                        }
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'Time-of-Day Averages: Field vs AI (24 Sessions)'
                    }
                }
            }
        });

        // Detailed Field Observations Chart - All Sessions
        const detailedFieldCtx = document.getElementById('detailedFieldChart').getContext('2d');
        
        // Simulated detailed data based on your 24 field observation sessions
        const detailedFieldData = {
            labels: [
                'Week 5a Morning Site 1', 'Week 5a Morning Site 2', 'Week 5a Mid Site 1', 'Week 5a Mid Site 2',
                'Week 5a Afternoon Site 1', 'Week 5a Afternoon Site 2', 'Week 5b Morning Site 1', 'Week 5b Morning Site 2',
                'Week 5b Mid Site 1', 'Week 5b Mid Site 2', 'Week 5b Afternoon Site 1', 'Week 5b Afternoon Site 2',
                'Week 6a Morning Site 1', 'Week 6a Morning Site 2', 'Week 6a Mid Site 1', 'Week 6a Mid Site 2',
                'Week 6a Afternoon Site 1', 'Week 6a Afternoon Site 2', 'Week 6b Morning Site 1', 'Week 6b Morning Site 2',
                'Week 6b Mid Site 1', 'Week 6b Mid Site 2', 'Week 6b Afternoon Site 1', 'Week 6b Afternoon Site 2'
            ],
            fieldData: [2, 2, 4, 2, 3, 1, 2, 2, 4, 3, 4, 5, 8, 7, 6, 5, 3, 4, 6, 5, 7, 4, 8, 6],
            aiData: [3, 4, 6, 7, 8, 15, 2, 3, 5, 6, 12, 18, 10, 9, 8, 7, 6, 8, 7, 8, 9, 6, 14, 16]
        };
        
        new Chart(detailedFieldCtx, {
            type: 'line',
            data: {
                labels: detailedFieldData.labels,
                datasets: [{
                    label: 'Field Observed (on-site)',
                    data: detailedFieldData.fieldData,
                    borderColor: '#fbbf24',
                    backgroundColor: 'rgba(251, 191, 36, 0.2)',
                    fill: false,
                    tension: 0.1
                }, {
                    label: 'AI Model Detections',
                    data: detailedFieldData.aiData,
                    borderColor: '#10b981',
                    backgroundColor: 'rgba(16, 185, 129, 0.2)',
                    fill: false,
                    tension: 0.1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Observation Sessions (Chronological Order)'
                        },
                        ticks: {
                            maxRotation: 45,
                            minRotation: 45
                        }
                    },
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Bee Count'
                        }
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'All Field Observation Sessions vs AI Detections'
                    }
                },
                interaction: {
                    intersect: false,
                    mode: 'index'
                }
            }
        });
    </script>
</body>
</html>